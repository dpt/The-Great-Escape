<!DOCTYPE html>
<html>
<head>
<title>The Great Escape: Trivia</title>
<meta charset="utf-8" />
<link rel="stylesheet" type="text/css" href="../skoolkit.css" />
<link rel="stylesheet" type="text/css" href="../TheGreatEscape.css" />
</head>
<body class="Facts">
<table class="header">
<tr>
<td class="logo"><a href="../index.html"><img alt="The Great Escape" src="../images/logo.png" /></a></td>
<td class="page-header">Trivia</td>
</tr>
</table>
<ul class="contents">
<li><a href="#unusedSupertiles">Unused super tiles</a></li>
<li><a href="#alternatingSpeed">Game speed varies</a></li>
<li><a href="#unusedRooms">Unused rooms</a></li>
<li><a href="#unusedInteriorObjects">Unused interior objects</a></li>
<li><a href="#neverUsesIX">The IX register is never used</a></li>
<li><a href="#fullerJoystick">Unused Fuller joystick routine</a></li>
<li><a href="#randomness">Randomness</a></li>
<li><a href="#deadGuys">Permanent Slumber</a></li>
</ul>
<div><span id="unusedSupertiles"></span></div>
<div class="box box-1">
<div class="box-title">Unused super tiles</div>
<div class="paragraph">
There are two unused supertiles: $4F and $9A. The tiles are defined but not used in the map.
</div>
</div>
<div><span id="alternatingSpeed"></span></div>
<div class="box box-2">
<div class="box-title">Game speed varies</div>
<div class="paragraph">
When our hero is outdoors the speed of the game can vary greatly depending on where he stands. Look at the rate at which the morale flag waves then take a single step. You will notice the flag waving faster or slower depending on where you started.
</div>
<div class="paragraph">
This is because the routine which copies the back-buffered game screen to the real screen has two modes: a fast mode where the bytes are copied directly and a slow mode where the pixels are rolled by a nibble before being written. Depending on where the hero is standing the screen buffer may not be aligned with regard to the screen and require use of the slow rolling routine.
</div>
<div class="paragraph">
Interior scenes in the game run far too fast so have a dedicated delay loop at <a href="../asm/A095.html">interior_delay_loop</a> to slow things down.
</div>
</div>
<div><span id="unusedRooms"></span></div>
<div class="box box-1">
<div class="box-title">Unused rooms</div>
<div class="paragraph">
There are three unused room indices: 6, 26 and 27.
</div>
</div>
<div><span id="unusedInteriorObjects"></span></div>
<div class="box box-2">
<div class="box-title">Unused interior objects</div>
<div class="paragraph">
There are three unused interior object indices: 21, 28, 39.
</div>
</div>
<div><span id="neverUsesIX"></span></div>
<div class="box box-1">
<div class="box-title">The IX register is never used</div>
<div class="paragraph">
Nowhere does any routine in the game use the IX register. Of the two index registers it only uses IY.
</div>
</div>
<div><span id="fullerJoystick"></span></div>
<div class="box box-2">
<div class="box-title">Unused Fuller joystick routine</div>
<div class="paragraph">
There is a Fuller joystick routine at $FEA3 / <a href="../asm/FEA3.html">inputroutine_fuller</a> which is never used by the game.
</div>
<div class="paragraph">
The game supports keyboard, Kempston, Sinclair and Protek joystick interfaces. Once selected from the main menu the chosen keyboard or joystick routine is copied to $F075 and used from there. There is no way to return to the main menu, so the space occupied by the input routines is then reclaimed for the window buffer.
</div>
</div>
<div><span id="randomness"></span></div>
<div class="box box-1">
<div class="box-title">Randomness</div>
<div class="paragraph">
With each call to <a href="../asm/A035.html">wave_morale_flag</a> the game increments a byte-sized counter at <a href="../asm/A12F.html">game_counter</a>.  The game's main loop reads this counter and triggers events when the counter hits multiples of 64, including zero. In addition to waving the flag on the menu screen the main game uses the game counter for timing lock picking and wire cutting.
</div>
<div class="paragraph">
However this counter is *not* reset when the game is started. This means that the amount of time taken to choose the input device on the menu acts as a random seed into the behaviour of the game. So unless you start two games at *exactly* the same moment you will witness the hero waking up at inconsistent times and the supporting characters taking divergent routes through the game.
</div>
<div class="paragraph">
The game also uses pseudo-random values generated by the routine at <a href="../asm/CB85.html">random_nibble</a>. This isn't a particularly complicated routine: it just returns nibbles pulled from RAM at $9000..$90FF.
</div>
</div>
<div><span id="deadGuys"></span></div>
<div class="box box-2">
<div class="box-title">Permanent Slumber</div>
<div class="paragraph">
Hut 1 - the highest and leftmost hut on the main map - has four beds, of which three are occupied by sleeping figures which - creepily - never appear to move.
</div>
<div class="paragraph">
Do these characters ever get out of bed? Well, there are no references to those bed objects in the <a href="../asm/6B79.html">beds</a> array which is used by <a href="../asm/A289.html">wake_up</a> and <a href="../asm/A444.html">character_sleeps</a> to alter the room data, so there's no way they can ever spawn.
</div>
<div class="paragraph">
Of the 26 characters in the game only six are prisoners. This seems a little low in comparison to the fifteen guards. We can posit that there were more prisoners planned - there's capacity for eleven of them plus the hero in the huts - but that speed or pathfinding congestion issues prevented the game being fully populated.
</div>
</div>
<footer>
<div class="release">The complete The Great Escape disassembly 20210529</div>
<div class="copyright">&copy; 1986 Denton Designs &amp; Ocean Software Ltd. (The Great Escape). &copy; 2012-2021 David Thomas (this disassembly).</div>
<div class="created">Created using <a href="https://skoolkit.ca">SkoolKit</a> 8.4.</div>
</footer>
</body>
</html>